{"ast":null,"code":"import _objectSpread from \"/Users/alberto/Desktop/Apps/ecommerce1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/alberto/Desktop/Apps/ecommerce1/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/alberto/Desktop/Apps/ecommerce1/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/alberto/Desktop/Apps/ecommerce1/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/alberto/Desktop/Apps/ecommerce1/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _jsxFileName = \"/Users/alberto/Desktop/Apps/ecommerce1/src/pages/shop/shop.component.jsx\";\nimport React from \"react\";\nimport CollectionsOverview from \"../../components/collections-overview/collections-overview.component\";\nimport { Route } from \"react-router-dom\";\nimport { createStructuredSelector } from \"reselect\";\nimport CollectionPage from \"../collection/collection.component\"; //Selectors\n\nimport { selectIsCollectionFetching, selectIsCollectionLoaded } from \"../../redux/shop/shop.selectors\";\nimport { connect } from \"react-redux\";\nimport { fetchCollectionsStartAsync as _fetchCollectionsStartAsync } from \"../../redux/shop/shop.actions\";\nimport WithSpinner from \"../../components/with-spinner/with-spinner.component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar CollectionOverviewWithSpinner = WithSpinner(CollectionsOverview);\nvar CollectionPageWithSpinner = WithSpinner(CollectionPage);\n\nvar ShopPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(ShopPage, _React$Component);\n\n  var _super = _createSuper(ShopPage);\n\n  function ShopPage() {\n    _classCallCheck(this, ShopPage);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ShopPage, [{\n    key: \"componentDidMount\",\n    value:\n    /*   //Fetch shop data from Firestor\n    unsubscribeFromSnapshot = null; */\n    function componentDidMount() {\n      var fetchCollectionsStartAsync = this.props.fetchCollectionsStartAsync;\n      fetchCollectionsStartAsync();\n      /* \n      //EVERYTHING IS MANAGED BY REDUX AND REDUX-THUNK SINCE IT'S A BETTER PRACTICE. SHOP ITEMS COULDN'T LOAD UNLESS SHOP PAGE WAS VISITED\n      const { updateCollections } = this.props;\n      const collectionRef = firestore.collection(\"collections\");\n      //----------------------------------------------------\n      /*     //The \"fetch\" method is similiar to the get() method, but the object returned is far more articulated than the others.\n      fetch(\n        \"https://firestore.googleapis.com/v1/projects/crwn-db-4e424/databases/(default)/documents/collections\"\n      )\n        .then((response) => response.json())\n        .then((collections) => console.log(collections)); */\n      //----------------------------------------------------\n\n      /*     //This way is a one-time fetch method, quite common and doesn't require a listener component\n      collectionRef.get().then((snapshot) => {\n        const collectionsMap = convertCollectionsSnapshotToMap(snapshot);\n        updateCollections(collectionsMap);\n        this.setState({ loading: false });\n      }); */\n      //----------------------------------------------------\n\n      /*     \n        //This method to fetch data is more advanced. It establishes a live listener on the DB or whatever event-generating component.\n        this.unsubscribeFromSnapshot = collectionRef.onSnapshot(\n        async (snapshot) => {\n          const collectionsMap = convertCollectionsSnapshotToMap(snapshot);\n          updateCollections(collectionsMap);\n          this.setState({ loading: false });\n        }\n      ); */\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props = this.props,\n          match = _this$props.match,\n          isCollectionFetching = _this$props.isCollectionFetching,\n          isCollectionLoaded = _this$props.isCollectionLoaded;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shop-page\",\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"\".concat(match.path),\n          render: function render(props) {\n            return /*#__PURE__*/_jsxDEV(CollectionOverviewWithSpinner, _objectSpread({\n              isLoading: isCollectionFetching\n            }, props), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 13\n            }, _this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"\".concat(match.path, \"/:collectionId\"),\n          render: function render(props) {\n            return /*#__PURE__*/_jsxDEV(CollectionPageWithSpinner, _objectSpread({\n              isLoading: !isCollectionLoaded\n            }, props), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 13\n            }, _this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return ShopPage;\n}(React.Component);\n\nvar mapStateToProps = createStructuredSelector({\n  isCollectionFetching: selectIsCollectionFetching,\n  isCollectionLoaded: selectIsCollectionLoaded\n});\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    fetchCollectionsStartAsync: function fetchCollectionsStartAsync() {\n      return dispatch(_fetchCollectionsStartAsync());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShopPage);","map":{"version":3,"sources":["/Users/alberto/Desktop/Apps/ecommerce1/src/pages/shop/shop.component.jsx"],"names":["React","CollectionsOverview","Route","createStructuredSelector","CollectionPage","selectIsCollectionFetching","selectIsCollectionLoaded","connect","fetchCollectionsStartAsync","WithSpinner","CollectionOverviewWithSpinner","CollectionPageWithSpinner","ShopPage","props","match","isCollectionFetching","isCollectionLoaded","path","Component","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,mBAAP,MAAgC,sEAAhC;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,wBAAT,QAAyC,UAAzC;AACA,OAAOC,cAAP,MAA2B,oCAA3B,C,CAEA;;AACA,SACEC,0BADF,EAEEC,wBAFF,QAGO,iCAHP;AAKA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,0BAA0B,IAA1BA,2BAAT,QAA2C,+BAA3C;AACA,OAAOC,WAAP,MAAwB,sDAAxB;;AAEA,IAAMC,6BAA6B,GAAGD,WAAW,CAACR,mBAAD,CAAjD;AACA,IAAMU,yBAAyB,GAAGF,WAAW,CAACL,cAAD,CAA7C;;IAEMQ,Q;;;;;;;;;;;;;;AACJ;AACF;AACE,iCAAoB;AAClB,UAAQJ,0BAAR,GAAuC,KAAKK,KAA5C,CAAQL,0BAAR;AACAA,MAAAA,0BAA0B;AAE1B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;;AACA;AACJ;AACA;AACA;AACA;AACA;AACI;;AACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACG;;;WAED,kBAAS;AAAA;;AACP,wBAA4D,KAAKK,KAAjE;AAAA,UAAQC,KAAR,eAAQA,KAAR;AAAA,UAAeC,oBAAf,eAAeA,oBAAf;AAAA,UAAqCC,kBAArC,eAAqCA,kBAArC;AACA,0BACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCACE,QAAC,KAAD;AACE,UAAA,KAAK,MADP;AAEE,UAAA,IAAI,YAAKF,KAAK,CAACG,IAAX,CAFN;AAGE,UAAA,MAAM,EAAE,gBAACJ,KAAD;AAAA,gCACN,QAAC,6BAAD;AACE,cAAA,SAAS,EAAEE;AADb,eAEMF,KAFN;AAAA;AAAA;AAAA;AAAA,qBADM;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,gBADF,eAWE,QAAC,KAAD;AACE,UAAA,KAAK,MADP;AAEE,UAAA,IAAI,YAAKC,KAAK,CAACG,IAAX,mBAFN;AAGE,UAAA,MAAM,EAAE,gBAACJ,KAAD;AAAA,gCACN,QAAC,yBAAD;AACE,cAAA,SAAS,EAAE,CAACG;AADd,eAEMH,KAFN;AAAA;AAAA;AAAA;AAAA,qBADM;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,gBAXF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAwBD;;;;EA/DoBb,KAAK,CAACkB,S;;AAkE7B,IAAMC,eAAe,GAAGhB,wBAAwB,CAAC;AAC/CY,EAAAA,oBAAoB,EAAEV,0BADyB;AAE/CW,EAAAA,kBAAkB,EAAEV;AAF2B,CAAD,CAAhD;;AAKA,IAAMc,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD;AAAA,SAAe;AACxCb,IAAAA,0BAA0B,EAAE;AAAA,aAAMa,QAAQ,CAACb,2BAA0B,EAA3B,CAAd;AAAA;AADY,GAAf;AAAA,CAA3B;;AAGA,eAAeD,OAAO,CAACY,eAAD,EAAkBC,kBAAlB,CAAP,CAA6CR,QAA7C,CAAf","sourcesContent":["import React from \"react\";\nimport CollectionsOverview from \"../../components/collections-overview/collections-overview.component\";\nimport { Route } from \"react-router-dom\";\nimport { createStructuredSelector } from \"reselect\";\nimport CollectionPage from \"../collection/collection.component\";\n\n//Selectors\nimport {\n  selectIsCollectionFetching,\n  selectIsCollectionLoaded,\n} from \"../../redux/shop/shop.selectors\";\n\nimport { connect } from \"react-redux\";\nimport { fetchCollectionsStartAsync } from \"../../redux/shop/shop.actions\";\nimport WithSpinner from \"../../components/with-spinner/with-spinner.component\";\n\nconst CollectionOverviewWithSpinner = WithSpinner(CollectionsOverview);\nconst CollectionPageWithSpinner = WithSpinner(CollectionPage);\n\nclass ShopPage extends React.Component {\n  /*   //Fetch shop data from Firestor\n  unsubscribeFromSnapshot = null; */\n  componentDidMount() {\n    const { fetchCollectionsStartAsync } = this.props;\n    fetchCollectionsStartAsync();\n\n    /* \n   //EVERYTHING IS MANAGED BY REDUX AND REDUX-THUNK SINCE IT'S A BETTER PRACTICE. SHOP ITEMS COULDN'T LOAD UNLESS SHOP PAGE WAS VISITED\n   const { updateCollections } = this.props;\n    const collectionRef = firestore.collection(\"collections\");\n//----------------------------------------------------\n    /*     //The \"fetch\" method is similiar to the get() method, but the object returned is far more articulated than the others.\n    fetch(\n      \"https://firestore.googleapis.com/v1/projects/crwn-db-4e424/databases/(default)/documents/collections\"\n    )\n      .then((response) => response.json())\n      .then((collections) => console.log(collections)); */\n    //----------------------------------------------------\n    /*     //This way is a one-time fetch method, quite common and doesn't require a listener component\n    collectionRef.get().then((snapshot) => {\n      const collectionsMap = convertCollectionsSnapshotToMap(snapshot);\n      updateCollections(collectionsMap);\n      this.setState({ loading: false });\n    }); */\n    //----------------------------------------------------\n    /*     \n      //This method to fetch data is more advanced. It establishes a live listener on the DB or whatever event-generating component.\n      this.unsubscribeFromSnapshot = collectionRef.onSnapshot(\n      async (snapshot) => {\n        const collectionsMap = convertCollectionsSnapshotToMap(snapshot);\n        updateCollections(collectionsMap);\n        this.setState({ loading: false });\n      }\n    ); */\n  }\n\n  render() {\n    const { match, isCollectionFetching, isCollectionLoaded } = this.props;\n    return (\n      <div className=\"shop-page\">\n        <Route\n          exact\n          path={`${match.path}`}\n          render={(props) => (\n            <CollectionOverviewWithSpinner\n              isLoading={isCollectionFetching}\n              {...props}\n            />\n          )}\n        />\n        <Route\n          exact\n          path={`${match.path}/:collectionId`}\n          render={(props) => (\n            <CollectionPageWithSpinner\n              isLoading={!isCollectionLoaded}\n              {...props}\n            />\n          )}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = createStructuredSelector({\n  isCollectionFetching: selectIsCollectionFetching,\n  isCollectionLoaded: selectIsCollectionLoaded,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  fetchCollectionsStartAsync: () => dispatch(fetchCollectionsStartAsync()),\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(ShopPage);\n"]},"metadata":{},"sourceType":"module"}