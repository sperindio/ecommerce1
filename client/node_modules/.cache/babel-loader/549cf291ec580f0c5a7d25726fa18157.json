{"ast":null,"code":"import _objectSpread from \"/Users/alberto/Desktop/Apps/ecommerce1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/alberto/Desktop/Apps/ecommerce1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/alberto/Desktop/Apps/ecommerce1/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/alberto/Desktop/Apps/ecommerce1/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/alberto/Desktop/Apps/ecommerce1/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/alberto/Desktop/Apps/ecommerce1/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _jsxFileName = \"/Users/alberto/Desktop/Apps/ecommerce1/src/pages/shop/shop.component.jsx\";\nimport _regeneratorRuntime from \"/Users/alberto/Desktop/Apps/ecommerce1/node_modules/@babel/runtime/regenerator/index.js\";\nimport React from \"react\";\nimport CollectionsOverview from \"../../components/collections-overview/collections-overview.component\";\nimport { Route } from \"react-router-dom\";\nimport CollectionPage from \"../collection/collection.component\";\nimport { firestore, convertCollectionsSnapshotToMap } from \"../../firebase/firebase.utils\";\nimport { connect } from \"react-redux\";\nimport _updateCollections from \"../../redux/shop/shop.actions\";\nimport WithSpinner from \"../../components/with-spinner/with-spinner.component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar CollectionOverviewWithSpinner = WithSpinner(CollectionsOverview);\nvar CollectionPageWithSpinner = WithSpinner(CollectionPage);\n\nvar ShopPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(ShopPage, _React$Component);\n\n  var _super = _createSuper(ShopPage);\n\n  function ShopPage() {\n    var _this;\n\n    _classCallCheck(this, ShopPage);\n\n    _this = _super.call(this);\n    _this.unsubscribeFromSnapshot = null;\n    _this.state = {\n      loading: true\n    };\n    return _this;\n  } //Fetch shop data from Firestor\n\n\n  _createClass(ShopPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var updateCollections = this.props.updateCollections;\n      var collectionRef = firestore.collection(\"collections\");\n      this.unsubscribeFromSnapshot = collectionRef.onSnapshot( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(snapshot) {\n          var collectionsMap;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  collectionsMap = convertCollectionsSnapshotToMap(snapshot);\n                  updateCollections(collectionsMap);\n\n                  _this2.setState({\n                    loading: false\n                  });\n\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var match = this.props.match;\n      var loading = this.state.loading;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shop-page\",\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"\".concat(match.path),\n          render: function render(props) {\n            return /*#__PURE__*/_jsxDEV(CollectionOverviewWithSpinner, _objectSpread({\n              isLoading: loading\n            }, props), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 13\n            }, _this3);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"\".concat(match.path, \"/:collectionId\"),\n          render: function render(props) {\n            return /*#__PURE__*/_jsxDEV(CollectionPageWithSpinner, _objectSpread({\n              isLoading: loading\n            }, props), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 13\n            }, _this3);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return ShopPage;\n}(React.Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updateCollections: function updateCollections(collectionsMap) {\n      return dispatch(_updateCollections(collectionsMap));\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(ShopPage);","map":{"version":3,"sources":["/Users/alberto/Desktop/Apps/ecommerce1/src/pages/shop/shop.component.jsx"],"names":["React","CollectionsOverview","Route","CollectionPage","firestore","convertCollectionsSnapshotToMap","connect","updateCollections","WithSpinner","CollectionOverviewWithSpinner","CollectionPageWithSpinner","ShopPage","unsubscribeFromSnapshot","state","loading","props","collectionRef","collection","onSnapshot","snapshot","collectionsMap","setState","match","path","Component","mapDispatchToProps","dispatch"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,mBAAP,MAAgC,sEAAhC;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,OAAOC,cAAP,MAA2B,oCAA3B;AACA,SACEC,SADF,EAEEC,+BAFF,QAGO,+BAHP;AAIA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,kBAAP,MAA8B,+BAA9B;AACA,OAAOC,WAAP,MAAwB,sDAAxB;;AAEA,IAAMC,6BAA6B,GAAGD,WAAW,CAACP,mBAAD,CAAjD;AACA,IAAMS,yBAAyB,GAAGF,WAAW,CAACL,cAAD,CAA7C;;IAEMQ,Q;;;;;AACJ,sBAAc;AAAA;;AAAA;;AACZ;AADY,UAQdC,uBARc,GAQY,IARZ;AAEZ,UAAKC,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAE;AADE,KAAb;AAFY;AAKb,G,CAED;;;;;WAGA,6BAAoB;AAAA;;AAClB,UAAQP,iBAAR,GAA8B,KAAKQ,KAAnC,CAAQR,iBAAR;AACA,UAAMS,aAAa,GAAGZ,SAAS,CAACa,UAAV,CAAqB,aAArB,CAAtB;AACA,WAAKL,uBAAL,GAA+BI,aAAa,CAACE,UAAd;AAAA,4EAC7B,iBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,kBAAAA,cADR,GACyBf,+BAA+B,CAACc,QAAD,CADxD;AAEEZ,kBAAAA,iBAAiB,CAACa,cAAD,CAAjB;;AACA,kBAAA,MAAI,CAACC,QAAL,CAAc;AAAEP,oBAAAA,OAAO,EAAE;AAAX,mBAAd;;AAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAD6B;;AAAA;AAAA;AAAA;AAAA,UAA/B;AAOD;;;WAED,kBAAS;AAAA;;AACP,UAAQQ,KAAR,GAAkB,KAAKP,KAAvB,CAAQO,KAAR;AACA,UAAQR,OAAR,GAAoB,KAAKD,KAAzB,CAAQC,OAAR;AACA,0BACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCACE,QAAC,KAAD;AACE,UAAA,KAAK,MADP;AAEE,UAAA,IAAI,YAAKQ,KAAK,CAACC,IAAX,CAFN;AAGE,UAAA,MAAM,EAAE,gBAACR,KAAD;AAAA,gCACN,QAAC,6BAAD;AAA+B,cAAA,SAAS,EAAED;AAA1C,eAAuDC,KAAvD;AAAA;AAAA;AAAA;AAAA,sBADM;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,gBADF,eAQE,QAAC,KAAD;AACE,UAAA,KAAK,MADP;AAEE,UAAA,IAAI,YAAKO,KAAK,CAACC,IAAX,mBAFN;AAGE,UAAA,MAAM,EAAE,gBAACR,KAAD;AAAA,gCACN,QAAC,yBAAD;AAA2B,cAAA,SAAS,EAAED;AAAtC,eAAmDC,KAAnD;AAAA;AAAA;AAAA;AAAA,sBADM;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,gBARF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAkBD;;;;EA5CoBf,KAAK,CAACwB,S;;AA+C7B,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD;AAAA,SAAe;AACxCnB,IAAAA,iBAAiB,EAAE,2BAACa,cAAD;AAAA,aACjBM,QAAQ,CAACnB,kBAAiB,CAACa,cAAD,CAAlB,CADS;AAAA;AADqB,GAAf;AAAA,CAA3B;;AAIA,eAAed,OAAO,CAAC,IAAD,EAAOmB,kBAAP,CAAP,CAAkCd,QAAlC,CAAf","sourcesContent":["import React from \"react\";\nimport CollectionsOverview from \"../../components/collections-overview/collections-overview.component\";\nimport { Route } from \"react-router-dom\";\nimport CollectionPage from \"../collection/collection.component\";\nimport {\n  firestore,\n  convertCollectionsSnapshotToMap,\n} from \"../../firebase/firebase.utils\";\nimport { connect } from \"react-redux\";\nimport updateCollections from \"../../redux/shop/shop.actions\";\nimport WithSpinner from \"../../components/with-spinner/with-spinner.component\";\n\nconst CollectionOverviewWithSpinner = WithSpinner(CollectionsOverview);\nconst CollectionPageWithSpinner = WithSpinner(CollectionPage);\n\nclass ShopPage extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: true,\n    };\n  }\n\n  //Fetch shop data from Firestor\n  unsubscribeFromSnapshot = null;\n\n  componentDidMount() {\n    const { updateCollections } = this.props;\n    const collectionRef = firestore.collection(\"collections\");\n    this.unsubscribeFromSnapshot = collectionRef.onSnapshot(\n      async (snapshot) => {\n        const collectionsMap = convertCollectionsSnapshotToMap(snapshot);\n        updateCollections(collectionsMap);\n        this.setState({ loading: false });\n      }\n    );\n  }\n\n  render() {\n    const { match } = this.props;\n    const { loading } = this.state;\n    return (\n      <div className=\"shop-page\">\n        <Route\n          exact\n          path={`${match.path}`}\n          render={(props) => (\n            <CollectionOverviewWithSpinner isLoading={loading} {...props} />\n          )}\n        />\n        <Route\n          exact\n          path={`${match.path}/:collectionId`}\n          render={(props) => (\n            <CollectionPageWithSpinner isLoading={loading} {...props} />\n          )}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateCollections: (collectionsMap) =>\n    dispatch(updateCollections(collectionsMap)),\n});\nexport default connect(null, mapDispatchToProps)(ShopPage);\n"]},"metadata":{},"sourceType":"module"}